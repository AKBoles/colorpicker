fetch('/upload', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/x-www-form-urlencoded'
  },
  body: new URLSearchParams({
    cropped_image: base64Data
  })
})
  .then(response => response.json())
  .then(data => {
    if (data.error) {
      resultDiv.textContent = 'Error: ' + data.error;
    } else {
      const { hex, rgb, cmyk, hsl } = data;
      resultDiv.innerHTML = `
        <p>Dominant Color (HEX): <strong>${hex}</strong></p>
        <div style="background:${hex}; width:40px; height:40px; display:inline-block; vertical-align:middle; margin-left:8px;"></div>
        <p>RGB: <strong>${rgb}</strong></p>
        <p>CMYK: <strong>${cmyk}</strong></p>
        <p>HSL: <strong>${hsl}</strong></p>
      `;
    }
  })
  .catch(err => {
    console.error(err);
    resultDiv.textContent = 'An error occurred.';
  });
